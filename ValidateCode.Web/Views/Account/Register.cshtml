@model User
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>@CustomHelper.GetValue("Website-Titlte") -注册 </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    @*<meta name="renderer" content="webkit">*@
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <link href="~/Styles/reg.css" rel="stylesheet" />
    <link href="~/Scripts/tipso/css/tipso.min.css" rel="stylesheet" />

    <style>
        .am-text-danger{
            color:red;
        }
    </style>
</head>
<body>
    <div class="main" >
        <div class="header" >
            <h1>新用户注册</h1>

                <p class="registered">已有账号?<a href="/account/login">立即登录</a></p>
        </div>
        <form id="regForm">
            <ul class="dataform">
                <li>
                    <lable class="info">账号:<strong class="am-text-danger am-text-sm">*</strong></lable><input type="text" placeholder="请输入账号" required id="account" name="Account"/>
                    <div class="clear"> </div>
                </li>

                    <li>
                        <lable class="info">密码:<strong class="am-text-danger am-text-sm">*</strong></lable><input type="password" placeholder="请输入密码" required id="password" name="NewPassword" maxlength="12" />
                        <div class="clear"> </div>
                    </li>
                    <li>
                        <lable class="info">确认密码:<strong class="am-text-danger am-text-sm">*</strong></lable><input type="password" placeholder="确认密码" required id="password" name="ConfirmPassword" maxlength="12" />
                        <div class="clear"> </div>
                    </li>
                <li>
                    <lable class="info">邮箱:</lable><input type="text" placeholder="请输入邮箱" name="Email" maxlength="32"  />
                    <div class="clear"> </div>
                </li>
                <li>
                    <lable class="info">手机:<strong class="am-text-danger am-text-sm">*</strong></lable><input type="text" placeholder="请输入手机" required name="MobilePhone" maxlength="11"/>
                    <div class="clear"> </div>
                </li>
                <li>
                    <lable class="info">QQ:</lable><input type="text" placeholder="请输入QQ" name="QQ" maxlength="32" />
                    <div class="clear"> </div>
                </li>
                <li>
                    <lable class="info">支付宝姓名:<strong class="am-text-danger am-text-sm">*</strong></lable><input type="text" placeholder="请输入支付宝姓名" required name="AliPayName" maxlength="32" />
                    <div class="clear"> </div>
                </li>
                <li>
                    <lable class="info">支付宝账号:</lable><input type="text" placeholder="请输入支付宝账号" name="AliPayAccount" maxlength="32"  />
                    <div class="clear"> </div>
                </li>
                        <li>
                            <lable class="info">验证码:<strong class="am-text-danger am-text-sm">*</strong></lable>
                            <div style="width:70%;float:left;">
                                <input type="text" style="width:56%;" placeholder="请输入验证码" required name="ValiteCode" />
                                <img id="img_code" style="width:30%;height:2rem;float:left;" alt="" title="点击重新获取" src="/account/validatecode" onclick="javascript:$(this).attr('src','/account/validatecode?r='+Math.random());" />
                            </div>
                            <div class="clear"> </div>
                        </li>

                        <label><input type="checkbox" id="checkbox" checked=""><i> </i>同意平台条款</label>
                        <button class="submit-btn" onclick="Submit()">注册</button>

                    <div class="clear"> </div>
            </ul>
            <div class="clear"> </div>

        </form>

    </div>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/jquery.form.js"></script>
    <script src="~/Scripts/jquery-validation/js/jquery.validate.js"></script>
    <script src="~/Scripts/Nuoya/nuoya.core.js"></script>
    <script src="~/Scripts/Nuoya/nuoya.form.js"></script>
    <script src="~/Scripts/tipso/js/tipso.js"></script>
    <script type="text/javascript">

        function formInit(dataitem) {

                //添加表单验证
                $.Nuoya.form("regForm").validate({
                    rules: {
                        Account: {
                            required: true,
                            maxlength: 32
                        },
                        NewPassword: {
                            required: true,
                            maxlength: 12
                        },
                        ConfirmPassword: {
                            required: true,
                            maxlength: 12
                        },
                        Email: {
                            maxlength: 126,
                            email: true,
                        },
                        QQ: {
                            required: true,
                            maxlength: 32
                        },
                        MobilePhone: {
                            required: true,
                            mobile: true,
                        },
                        AliPayName: {
                            required: true,
                            maxlength: 32
                        },
                        AliPayAccount: {
                            required: true,
                            mobile: true,
                        },
                        Code: {
                            required: true
                        }
                    },
                    messages: {
                        Account: {
                            required: "用户名不允许为空",
                            maxlength: "最多{0}个字符"
                        },
                        NewPassword: {
                            required: "密码不允许为空",
                            maxlength: "最多{0}个字符"
                        },
                        ConfirmPassword: {
                            required: "确认密码不允许为空",
                            maxlength: "最多{0}个字符"
                        },
                        Email: {
                            maxlength: "最多{0}个字符",
                        },
                        QQ: {
                            required: "QQ不允许为空",
                            maxlength: "最多{0}个字符"
                        },
                        MobilePhone: {
                            required: "手机不允许为空",
                        },
                        AliPayName: {
                            required: "支付宝姓名不允许为空",
                            maxlength: "最多{0}个字符"
                        },
                        AliPayAccount: {
                            required: "支付宝账号不允许为空",
                            maxlength: "最多{0}个字符"
                        },                     
                        Code: {
                            required: "验证码不允许为空",
                        },
                    }
                });
        }
        formInit();
        function Submit() {
                $.Nuoya.form("regForm").ajaxSubmit({
                    ajaxUrl: "/Account/Register",
                    callback: function (data) {
                        if (!data.ErrorDesc) {
                            window.location.href = "/home/index";
                        }
                        else {
                            alert(data.ErrorDesc);
                        }
                        return;
                    }
                });

        }
    </script>

</body>
</html>          